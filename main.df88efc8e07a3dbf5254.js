(()=>{"use strict";class e{constructor(e,t){this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._errorClass=e.errorClass,this._buttonSubmit=this._form.querySelector(e.buttonSubmitSelector),this._buttonSubmitDisabledClass=e.buttonSubmitDisabledClass,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector))}_disableSubmit(e){e.preventDefault()}enabledValidationForm(){this._addInputListners(),this._form.addEventListener("submit",this._disableSubmit),this._form.addEventListener("input",(()=>{this.toggleButton()})),this.toggleButton()}_addInputListners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._handleFormInput(e)}))}))}checkValidation(){this._inputList.forEach((e=>{this._setParametersInput(e),e.classList.remove(this._errorClass),this._spanError.textContent=""}))}_setParametersInput(e){this._inputElement=e,this._inputElementId=this._inputElement.id,this._spanError=this._form.querySelector(`#${this._inputElementId}-error`)}_handleFormInput(e){this._setParametersInput(e),this._inputElement.validity.valid?(this._inputElement.classList.remove(this._errorClass),this._spanError.textContent=""):(this._inputElement.classList.add(this._errorClass),this._spanError.textContent=this._inputElement.validationMessage)}toggleButton(){this._isFormValid=this._form.checkValidity(),this._buttonSubmit.disabled=!this._isFormValid,this._buttonSubmit.classList.toggle(this._buttonSubmitDisabledClass,!this._isFormValid)}}class t{constructor(e,t,s){this._cardData=e,this._photoTemplate=t,this._handleOpenPopupPhoto=s}createCard(){return this._photoElement=this._photoTemplate.querySelector(".photo__element"),this._photoElementClone=this._photoElement.cloneNode(!0),this._cardPhoto=this._photoElementClone.querySelector(".photo__img"),this._cardPhoto.src=this._cardData.link,this._cardPhoto.alt=this._cardData.name,this._cardTitle=this._photoElementClone.querySelector(".photo__title"),this._cardTitle.textContent=this._cardData.name,this._photoDelete=this._photoElementClone.querySelector(".photo__delete"),this._photoLike=this._photoElementClone.querySelector(".photo__like"),this._addInputListners(),this._photoElementClone}_addInputListners(){this._cardPhoto.addEventListener("click",this._handleOpenPopupPhoto),this._photoDelete.addEventListener("click",(()=>{this._removeCard()})),this._photoLike.addEventListener("click",(()=>{this._cardLike()}))}_removeCard(){this._photoElementClone.remove()}_cardLike(){this._photoLike.classList.toggle("photo__like_active")}}const s=document.querySelector(".popup_type_profile"),o=document.querySelector(".profile__button-edit"),n=document.querySelector(".popup__input_type_name-profile"),r=document.querySelector(".popup__input_type_profession-profile"),i=document.querySelector(".profile__name"),p=document.querySelector(".profile__subname"),a=document.querySelector(".profile__button-add"),l=document.querySelector(".popup_type_place"),_=document.querySelector(".popup_type_photo"),u=(document.querySelector(".popup__img"),document.querySelector(".popup__name"),document.querySelector(".popup__form_type_place")),h=document.querySelector(".popup__form_type_profile"),c=document.querySelector("#photo-template").content,d=document.querySelector(".photo__container"),m={formSelector:".popup__form",inputSelector:".popup__input",errorClass:"form__input_error",buttonSubmitSelector:".popup__submit-btn",buttonSubmitDisabledClass:"popup__submit-btn_disabled"};class b{constructor(e){this._popup=e,this._btnClose=this._popup.querySelector(".btn-close")}open(){this._popup.classList.add("popup_active"),this._handleEscClose()}close(){this._popup.classList.remove("popup_active"),this._removeEscClose()}_handleEscClose(){document.addEventListener("keydown",this._handlePopupCloseEsc)}_removeEscClose(){document.removeEventListener("keydown",this._handlePopupCloseEsc)}setEventLesteners(){this._popup.addEventListener("mousedown",this._listenerClickOverley),this._btnClose.addEventListener("click",(()=>{this.close()}))}_listenerClickOverley=e=>{e.target===e.currentTarget&&this.close()};_handlePopupCloseEsc=e=>{"Escape"===e.key&&this.close()}}class y extends b{constructor(e,{submitForm:t}){super(e),this._popupForm=this._popup.querySelector(".popup__form"),this._submitForm=t,this._inputList=this._popupForm.querySelectorAll(".popup__input")}setEventLesteners(){super.setEventLesteners(),this._popupForm.addEventListener("submit",this._eventSubmit)}_getInputValues(){return this._inputsData={},this._inputList.forEach((e=>{this._inputsData[e.name]=e.value})),this._inputsData}_eventSubmit=e=>{e.preventDefault(),this._submitForm(this._getInputValues()),this.close()};close(){super.close(),this._popupForm.reset()}}const f=new e(m,u);f.enabledValidationForm();const E=new e(m,h);E.enabledValidationForm();const v=new class extends b{constructor(e){super(e),this._popupPhotoImg=this._popup.querySelector(".popup__img"),this._popupPhotoName=this._popup.querySelector(".popup__name")}open(e){super.open(),this._popupPhotoImg.src=e.link,this._popupPhotoName.alt=e.name,this._popupPhotoName.textContent=e.name}}(_);function S(e){const s=new t(e,c,(()=>{v.open(e)}));L.addItem(s.createCard())}v.setEventLesteners();const L=new class{constructor({items:e,renderer:t},s){this._renderedItems=e,this._renderer=t,this._container=s}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>this._renderer(e)))}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:e=>{S(e)}},d);L.renderItems();const C=new class{constructor(e,t){this._nameProfile=e,this._subNameProfile=t}getUserInfo(){return this._dataList={},this._dataList.name=this._nameProfile.textContent,this._dataList.profession=this._subNameProfile.textContent,this._dataList}setUserInfo(e){this._nameProfile.textContent=e.name,this._subNameProfile.textContent=e.profession}}(i,p),k=new y(s,{submitForm:e=>{C.setUserInfo(e)}});k.setEventLesteners();const g=new y(l,{submitForm:e=>{S(e)}});g.setEventLesteners(),o.addEventListener("click",(()=>{n.value=C.getUserInfo().name,r.value=C.getUserInfo().profession,k.open(),E.toggleButton(),E.checkValidation()})),a.addEventListener("click",(()=>{g.open(),f.toggleButton(),f.checkValidation()}))})();